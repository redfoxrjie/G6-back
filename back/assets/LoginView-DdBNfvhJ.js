import{a as r}from"./axios-B4uVmeYG.js";import{_ as d,c as p,a as s,w as m,b as c,v as l,t as g,o as u,p as _,d as f,e as h}from"./index-ChEu6d7K.js";const w={data(){return{commit:"登入",account:"",psw:""}},beforeMount(){localStorage.removeItem("adminInfo")},methods:{async adminLogin(){try{console.log("Attempting login with:",this.account,this.psw);const o=await r.post("http://localhost/phpG6/api/admin.php?action=login",{username:this.account,password:this.psw});if(console.log("Login response:",o.data),o.data.success){const t=o.data.admin;console.log("Login successful, admin info:",t),localStorage.setItem("adminInfo",JSON.stringify(t)),this.$router.push({name:"AdminView"})}else console.error("Login failed:",o.data.message),alert(o.data.message||"登入失敗")}catch(o){console.error("Login error:",o.response?o.response.data:o.message),alert("登入失敗，請稍後再試")}}}},i=o=>(_("data-v-4b455284"),o=o(),f(),o),v={class:"login-page"},b={class:"login-container"},I=i(()=>s("div",{class:"login-logo"},[s("img",{src:h,alt:"Logo"})],-1)),L=i(()=>s("h2",{class:"login-title"},"管理員登入",-1)),S={class:"login-field"},y=i(()=>s("label",{for:"account"},"帳號：",-1)),x={class:"login-field"},V=i(()=>s("label",{for:"psw"},"密碼：",-1)),B={type:"submit",class:"login-button"};function M(o,t,k,A,e,a){return u(),p("div",v,[s("div",b,[I,L,s("form",{onSubmit:t[2]||(t[2]=m((...n)=>a.adminLogin&&a.adminLogin(...n),["prevent"])),class:"login-form"},[s("div",S,[y,c(s("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=n=>e.account=n),id:"account",name:"memId"},null,512),[[l,e.account]])]),s("div",x,[V,c(s("input",{type:"password","onUpdate:modelValue":t[1]||(t[1]=n=>e.psw=n),id:"psw",name:"memPsw"},null,512),[[l,e.psw]])]),s("button",B,g(e.commit),1)],32)])])}const U=d(w,[["render",M],["__scopeId","data-v-4b455284"]]);export{U as default};
