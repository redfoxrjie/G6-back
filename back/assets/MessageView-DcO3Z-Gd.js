import{T as h}from"./ToggleSwitch-z5GpLJOK.js";import{_ as p,i as f,c as o,a as e,b as m,v as _,n as r,t as i,F as b,r as v,o as d,j as C,p as M,d as w}from"./index-CcafUdp0.js";const P={components:{ToggleSwitch:h},data(){return{messages:[],searchQuery:"",filter:"all",totalCount:0,processedCount:0,pendingCount:0,page:1,perPage:10}},computed:{filteredMessages(){let s=this.messages;return this.filter==="processed"?s=this.messages.filter(t=>t.status==="已發布"):this.filter==="pending"&&(s=this.messages.filter(t=>t.status==="未發布")),this.searchQuery&&(s=s.filter(t=>t.id.includes(this.searchQuery))),s.slice((this.page-1)*this.perPage,this.page*this.perPage)},totalPages(){return Math.ceil(this.filteredMessages.length/this.perPage)}},methods:{fetchMessages(){fetch("/messages.json").then(s=>{if(!s.ok)throw new Error("Network response was not ok");return s.json()}).then(s=>{this.messages=s,this.calculateMessageCounts()}).catch(s=>{console.error("There was a problem with the fetch operation:",s)})},calculateMessageCounts(){this.totalCount=this.messages.length,this.processedCount=this.messages.filter(s=>s.status==="已發布").length,this.pendingCount=this.messages.filter(s=>s.status==="未發布").length},filterMessages(s){this.filter=s,this.page=1},searchMessages(){this.page=1},addNewMessage(){},prevPage(){this.page>1&&this.page--},nextPage(){this.page<this.totalPages&&this.page++}},mounted(){this.fetchMessages()}},g=s=>(M("data-v-71c38b3f"),s=s(),w(),s),k={class:"message_management"},y={class:"message_management_container"},x=g(()=>e("h3",null,"消息管理",-1)),V={class:"search-container"},N={class:"btns-container"},Q={class:"btns"},S={class:"messages-table"},I=g(()=>e("thead",null,[e("tr",null,[e("th",null,"消息編號"),e("th",null,"主圖預覽"),e("th",null,"類別"),e("th",null,"消息標題"),e("th",null,"最後編輯日期"),e("th",null,"修改"),e("th",null,"狀態")])],-1)),T=["src"],j=g(()=>e("td",null,[e("button",{class:"edit-btn"},"🖉")],-1)),B={class:"pagination"},E=["disabled"],U=["disabled"];function D(s,t,F,z,n,a){const u=f("toggle-switch");return d(),o("div",k,[e("div",y,[x,e("div",V,[m(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=l=>n.searchQuery=l),placeholder:"消息編號"},null,512),[[_,n.searchQuery]]),e("button",{onClick:t[1]||(t[1]=(...l)=>a.searchMessages&&a.searchMessages(...l))},"搜尋")]),e("div",N,[e("ul",Q,[e("li",{class:r(["btn",{active:n.filter==="all"}]),onClick:t[2]||(t[2]=l=>a.filterMessages("all"))}," 全部("+i(n.totalCount)+") ",3),e("li",{class:r(["btn",{active:n.filter==="processed"}]),onClick:t[3]||(t[3]=l=>a.filterMessages("processed"))}," 已處理("+i(n.processedCount)+") ",3),e("li",{class:r(["btn",{active:n.filter==="pending"}]),onClick:t[4]||(t[4]=l=>a.filterMessages("pending"))}," 未處理("+i(n.pendingCount)+") ",3)]),e("button",{class:"btn add-button",onClick:t[5]||(t[5]=(...l)=>a.addNewMessage&&a.addNewMessage(...l))},"新增")]),e("table",S,[I,e("tbody",null,[(d(!0),o(b,null,v(a.filteredMessages,l=>(d(),o("tr",{key:l.id},[e("td",null,i(l.id),1),e("td",null,[e("img",{src:l.image,alt:"主圖預覽",class:"preview-img"},null,8,T)]),e("td",null,i(l.category),1),e("td",null,i(l.title),1),e("td",null,i(l.lastEdited),1),j,e("td",null,[C(u,{modelValue:l.status,"onUpdate:modelValue":c=>l.status=c},null,8,["modelValue","onUpdate:modelValue"])])]))),128))])]),e("div",B,[e("button",{onClick:t[6]||(t[6]=(...l)=>a.prevPage&&a.prevPage(...l)),disabled:n.page===1},"‹",8,E),e("span",null,i(n.page)+" / "+i(a.totalPages),1),e("button",{onClick:t[7]||(t[7]=(...l)=>a.nextPage&&a.nextPage(...l)),disabled:n.page===a.totalPages},"›",8,U)])])])}const A=p(P,[["render",D],["__scopeId","data-v-71c38b3f"]]);export{A as default};
